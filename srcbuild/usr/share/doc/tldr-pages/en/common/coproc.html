<h1>coproc</h1>

<blockquote><p>Bash builtin for creating interactive asynchronous subshells.
More information: <a href="https://www.gnu.org/software/bash/manual/bash.html#Coprocesses">https://www.gnu.org/software/bash/manual/bash.html#Coprocesses</a>.</p></blockquote>

<ul>
<li>Run a subshell asynchronously:</li>
</ul>


<p><code>coproc { {{command1; command2; ...}}; }</code></p>

<ul>
<li>Create a coprocess with a specific name:</li>
</ul>


<p><code>coproc {{name}} { {{command1; command2; ...}}; }</code></p>

<ul>
<li>Write to a specific coprocess <code>stdin</code>:</li>
</ul>


<p><code>echo "{{input}}" &gt;&amp;"${{{name}}[1]}"</code></p>

<ul>
<li>Read from a specific coprocess <code>stdout</code>:</li>
</ul>


<p><code>read {{variable}} &lt;&amp;"${{{name}}[0]}"</code></p>

<ul>
<li>Create a coprocess which repeatedly reads <code>stdin</code> and runs some commands on the input:</li>
</ul>


<p><code>coproc {{name}} { while read line; do {{command1; command2; ...}}; done }</code></p>

<ul>
<li>Create a coprocess which repeatedly reads <code>stdin</code>, runs a pipeline on the input, and writes the output to <code>stdout</code>:</li>
</ul>


<p><code>coproc {{name}} { while read line; do echo "$line" | {{command1 | command2 | ...}} | cat /dev/fd/0; done }</code></p>

<ul>
<li>Create and use a coprocess running <code>bc</code>:</li>
</ul>


<p><code>coproc BC { bc --mathlib; }; echo "1/3" &gt;&amp;"${BC[1]}"; read output &lt;&amp;"${BC[0]}"; echo "$output"</code></p>
